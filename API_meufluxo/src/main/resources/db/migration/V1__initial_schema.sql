create table accounts (initial_balance numeric(15,2) not null, is_active boolean not null, created_at timestamp(6) not null, id bigint generated by default as identity, updated_at timestamp(6) not null, name varchar(255) not null, account_type enum ('CHECKING', 'CREDIT_CARD', 'CASH', 'INVESTMENT', 'SAVING', 'BENEFIT_CARD') not null, primary key (id));
create table cash_movements (amount numeric(15,2) not null, is_active boolean not null, account_id_id bigint not null, category_id bigint not null, created_at timestamp(6) not null, id bigint generated by default as identity, occurred_at timestamp(6) not null, updated_at timestamp(6) not null, description varchar(255), notes varchar(255), payment_method enum ('BOLETO','CASH','CREDIT_CARD','DEBIT_CARD','PIX','TRANSFER','VA') not null, payment_type enum ('EXPENSE','INCOME') not null, primary key (id));
create table categories (is_active boolean not null, created_at timestamp(6) not null, id bigint generated by default as identity, updated_at timestamp(6) not null, name varchar(255) not null unique, category_type enum ('EXPENSE','INCOME') not null, primary key (id));
create table credit_card_transactions (amount numeric(15,2) not null, current_installment integer not null, installments integer not null, is_active boolean not null, category_id_id bigint not null, created_at timestamp(6) not null, credit_card_id bigint not null, id bigint generated by default as identity, transaction_date timestamp(6) not null, updated_at timestamp(6) not null, description varchar(255) not null, notes varchar(255), primary key (id));
create table credit_cards (closing_day integer not null, due_day integer not null, is_active boolean not null, limit_amount numeric(15,2) not null, created_at timestamp(6) not null, id bigint generated by default as identity, updated_at timestamp(6) not null, name varchar(255) not null, brand_card enum ('MASTERCARD','VISA') not null, primary key (id));
create table financial_projections (amount numeric(15,2) not null, is_active boolean not null, recurring boolean not null, account_id_id bigint not null, category_id_id bigint not null, created_at timestamp(6) not null, due_date timestamp(6) not null, id bigint generated by default as identity, updated_at timestamp(6) not null, description varchar(255), notes varchar(255), payment_type enum ('EXPENSE','INCOME') not null, projection_status enum ('CANCELED','PAID','PENDING') not null, recurrence_type enum ('BIMONTHLY','BIWEEKLY','MONTHLY','QUARTERLY','WEEKLY','YEARLY'), primary key (id));
create table invoices (amount numeric(15,2) not null, due_date date, is_active boolean not null, paid_at date, reference_month integer not null, reference_year integer not null, created_at timestamp(6) not null, credit_card_id bigint not null, id bigint generated by default as identity, updated_at timestamp(6) not null, status enum ('CLOSED','OPEN','PAID') not null, primary key (id));
alter table if exists cash_movements add constraint FK6hx00wdwbnqa3l34ge7pjqw2l foreign key (account_id_id) references accounts;
alter table if exists cash_movements add constraint FKr0qs5cffqv3ndnx52ijb0a515 foreign key (category_id) references categories;
alter table if exists credit_card_transactions add constraint FKmbokxhnsy5yf7eteqbbvx6vf foreign key (category_id_id) references categories;
alter table if exists credit_card_transactions add constraint FKkddy4atim0vhsbi1f2elp6opv foreign key (credit_card_id) references credit_cards;
alter table if exists financial_projections add constraint FK69yisudkk7plgka34qe6xqf78 foreign key (account_id_id) references accounts;
alter table if exists financial_projections add constraint FK5fl2i9rdtldk75t43ew5b8ftt foreign key (category_id_id) references categories;
alter table if exists invoices add constraint FK1kkkfobmc1tndj7ksbwfykfdw foreign key (credit_card_id) references credit_cards;
